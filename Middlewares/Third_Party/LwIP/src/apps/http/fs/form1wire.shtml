<!DOCTYPE HTML>
<html>

<head>
  <title>Edit of 1Wire</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link type="image/x-icon" rel="shortcut icon" href="favicon.ico">
  <link rel="stylesheet" href="styles.css">

  <script src="<!--#lang-->"></script>
  <script src="js/jquerymin.js"></script>

</head>

<body>

      <center>
        <h1>NUCLEO-F767ZI</h1>        

        <a href="index.shtml?ssid=yXmuD8sClewvu2eZpimZ8rKGBQx">Home</a> | <a href="select.shtml?ssid=yXmuD8sClewvu2eZpimZ8rKGBQx">Select pin</a> | <a href="tabswitch.shtml?ssid=yXmuD8sClewvu2eZpimZ8rKGBQx">Switch pin</a> | <a href="tabbutton.shtml?ssid=yXmuD8sClewvu2eZpimZ8rKGBQx">Button pin</a> | <a href="tabencoder.shtml?ssid=yXmuD8sClewvu2eZpimZ8rKGBQx">Encoder pin</a> | <a href="tabrelay.shtml?ssid=yXmuD8sClewvu2eZpimZ8rKGBQx">Relay pin</a> | <a href="tabpwm.shtml?ssid=yXmuD8sClewvu2eZpimZ8rKGBQx">PWM pin</a> | <a href="tabcron.shtml?ssid=yXmuD8sClewvu2eZpimZ8rKGBQx">Timers (crone)</a> | <a href="tab1wire.shtml?ssid=yXmuD8sClewvu2eZpimZ8rKGBQx">OneWire</a> | <a href="tabI2C.shtml?ssid=yXmuD8sClewvu2eZpimZ8rKGBQx">I2C</a> | <a href="settings.shtml?ssid=yXmuD8sClewvu2eZpimZ8rKGBQx">Settings</a> | <a href="logout.shtml">Logout</a> 

        <h2  id="title1">Edit OneWire pin</h2>

        <form action="tab1wire.shtml?ssid=<!--#ssid-->" method="post">
            <table class="zebra_2" border="1" align="center" id="tab1">
        
            </table>
            <br>
            <center>
              <button> Save pin </button>
            </center>
        </form>  

      </center>
      <script>
        function chelovek(){
            var abc = document.getElementById("sensor");
            var val = abc.value;
            if (val == 2 ){
                document.getElementById('quantity').readOnly = true;
                document.getElementById('quantity').setAttribute('value',1);
            }else if(val == 0){
                document.getElementById('quantity').readOnly = true;
                document.getElementById('quantity').setAttribute('value',0);
            }
            else{
                document.getElementById('quantity').readOnly = false;
            }
        }
        var response = '<!--#formjson-->';

        $(document).ready(function () {
    
            var val = JSON.parse(response);
            var employee_data = '';
    
            var employee_data_pin = '';
            employee_data_pin += ' ' + val.pins + ' ';
    
            employee_data += '<tr><td>ID</td><td>' + val.id + '<input type=\"hidden\" name=\"id" value=\"' + val.id + '\"></td></tr>';
            employee_data += '<tr><td>Pin</td><td>' + val.pins + '</td></tr>';
    
            employee_data += '<tr><td>Sensor</td><td><select onchange="chelovek();" id = "sensor" name=\"sensor\">';
            if (val.sensor == 0) {
                employee_data += ' <option value=\"0\" selected>None</option>';
            } else {
                employee_data += ' <option value=\"0\">None</option>';
            }
            if (val.sensor == 1) {
                employee_data += ' <option value=\"1\" selected>DS18B20</option>';
            } else {
                employee_data += ' <option value=\"1\">DS18B20</option>';
            }
            if (val.sensor == 2) {
                employee_data += ' <option value=\"2\" selected>DHT22</option>';
            } else {
                employee_data += ' <option value=\"2\">DHT22</option>';
            }
    
            employee_data += '</select></td></tr>';
    
            if (val.sensor == 2) {
                employee_data += '<tr><td>The quantity of sensors</td><td><input id = "quantity" type=\"number\" min=\"0\" max=\"75\" name=\"numdevices\" value=\"1\"  size=\"17\" style=\"width:45px;\" readonly></td></tr>';
            } else {
                employee_data += '<tr><td>The quantity of sensors</td><td><input id = "quantity" type=\"number\" min=\"0\" max=\"75\" name=\"numdevices\" value=\"' + val.numdevices + '\"  size=\"17\" style=\"width:45px;\"></td></tr>';
            }
    
            employee_data += '<tr><td>T<sub>upper</sub> C&deg;</td><td><input type="number" min="-55" max="125" name="uppert" value="' + val.uppert + '" size="10" style="width:45px;"></td></tr>';
            employee_data += '<tr><td>ACTION for T<sub>upper</sub> C&deg;</td><td><input type=\"text\" name=\"textupt" value=\"' + val.textupt + '\"></td></tr>';
            employee_data += '<tr><td>T<sub>lower</sub> C&deg;</td><td><input type="number" min="-55" max="125" name="lowert" value="' + val.lowert + '" size="10" style="width:45px;"></td></tr>';
            employee_data += '<tr><td>ACTION for T<sub>lower</sub> C&deg;</td><td><input type=\"text\" name=\"textlowt" value=\"' + val.textlowt + '\"></td></tr>';
            employee_data += '<tr><td>INFO</td><td><input type=\"text\" name=\"info" value=\"' + val.info + '\"></td></tr>';
            if (val.onoff == 1) {
                employee_data += '<tr><td>On/Off</td><td><label class=\"switch\"> <input name=\"onoff" type=\"hidden\" value=\"0\"> <input type=\"checkbox\" name=\"onoff" value=\"1\" checked=\"checked\"><span class=\"slider round\"></span></label></td></tr>';
            } else {
                employee_data += '<tr><td>On/Off</td><td><label class=\"switch\"> <input name=\"onoff" type=\"hidden\" value=\"0\"> <input type=\"checkbox\" name=\"onoff" value=\"1\" unchecked=\"unchecked\"><span class=\"slider round\"></span></label></td></tr>';
            }
    
            $('#tab1').append(employee_data);
            $('#title1').append(employee_data_pin);
    
        });
    
    </script>

</body>
</html>